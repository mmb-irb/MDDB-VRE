[
  {
    "id": "project",
    "shortName": "Project",
    "name": "Project Metadata",
    "icon": "mdi-code-block-tags",
    "description": "The following metadata has no effect on the workflow itself, but it will be written to the <strong>output metadata</strong> file. These values will be <strong>uploaded to the database</strong> and then exposed in the <strong>project overview</strong>. They may be also useful to <strong>search this project</strong> using the browser.",
    "fields": [
      {
        "id": "name",
        "label": "Name *",
        "type": "input",
        "inputType": "text",
        "description": "Write a brief description or title for this trajectory for the overview page. This name may be used by the client to search the trajectory in the database. The name is displayed in the overview page.",
        "rules": [
          {
            "id": "required",
            "regex": "!!v",
            "message": "This field is required"
          }
        ],
        "required": true,
        "cols": 12
      },
      {
        "id": "description",
        "label": "Description *",
        "type": "textarea",
        "rows": 3,
        "description": "Write additional comments about the project. The description is displayed in the overview page.",
        "rules": [
          {
            "id": "required",
            "regex": "!!v",
            "message": "This field is required"
          }
        ],
        "required": true,
        "cols": 12
      },
      {
        "id": "authors",
        "label": "Author *",
        "type": "multiple-input",
        "description": "Write author names. Authors are displayed in the overview page. IMPORTANT: Check already existing values for this field to avoid making duplicates.",
        "rules": [
          {
            "id": "required",
            "regex": "!!v",
            "message": "This field is required"
          }
        ],
        "required": true,
        "cols": 12,
        "subCols": 6
      },
      {
        "id": "group",
        "label": "Group *",
        "type": "multiple-input",
        "description": "Write author group name/s. The group is displayed in the overview page. IMPORTANT: Check already existing values for this field to avoid making duplicates.",
        "rules": [
          {
            "id": "required",
            "regex": "!!v",
            "message": "This field is required"
          }
        ],
        "required": true,
        "cols": 12,
        "subCols": 6
      },
      {
        "id": "citation",
        "label": "Write here the citation *",
        "type": "rich-textarea",
        "rows": 4,
        "description": "Citation for refering this simulation or related paper. The citation is displayed in the overview page.",
        "rules": [
          {
            "id": "required",
            "regex": "!!v",
            "message": "This field is required"
          }
        ],
        "required": true,
        "cols": 12
      },
      {
        "id": "thanks",
        "label": "Acknowledgements",
        "type": "textarea",
        "rows": 2,
        "description": "Acknowledgements to be shown in the overview page. E.g. I would like to thank my funders ...",
        "required": false,
        "cols": 12
      },
      {
        "id": "contact",
        "label": "Contact *",
        "type": "input",
        "inputType": "mail",
        "description": "Mail to contact the authors. The contact is displayed in the overview page.",
        "rules": [
          {
            "id": "required",
            "regex": "!!v",
            "message": "This field is required"
          },
          {
            "id": "email",
            "regex": "/.+@.+\\..+/.test(v)",
            "message": "E-mail must be valid"
          }
        ],
        "required": true,
        "cols": 6
      },
      {
        "id": "type",
        "label": "Type *",
        "type": "select",
        "description": "Type of molecular dynamics. At this moment there are only two options in this field: 'trajectory' and 'ensemble'.",
        "rules": [
          {
            "id": "required",
            "regex": "!!v",
            "message": "This field is required"
          }
        ],
        "required": true,
        "multiple": false,
        "options": "https://mmb.mddbr.eu/api/rest/current/projects/options?projection=metadata.TYPE",
        "cols": 6
      },
      {
        "id": "program",
        "label": "Program *",
        "type": "select",
        "description": "Program (software) name which carried the trajectory. Program and version are both displayed in the overview page.",
        "rules": [
          {
            "id": "required",
            "regex": "!!v && v.length > 0",
            "message": "This field is required"
          }
        ],
        "required": true,
        "multiple": false,
        "options": "https://mmb.mddbr.eu/api/rest/current/projects/options?projection=metadata.PROGRAM",
        "cols": 6
      },
      {
        "id": "version",
        "label": "Version *",
        "type": "input",
        "inputType": "text",
        "description": "Version of the program (software) which carried the trajectory. Program and version are both displayed in the overview page.",
        "rules": [
          {
            "id": "required",
            "regex": "!!v",
            "message": "This field is required"
          }
        ],
        "required": true,
        "cols": 6
      },
      {
        "id": "license",
        "label": "License text *",
        "type": "input",
        "inputType": "text",
        "description": "The license is displayed in the overview page. E.g. This trajectory dataset is released under a Creative Commons Attribution 4.0 International Public License.",
        "rules": [
          {
            "id": "required",
            "regex": "!!v",
            "message": "This field is required"
          }
        ],
        "required": true,
        "cols": 6
      },
      {
        "id": "linkcense",
        "label": "License link *",
        "type": "input",
        "inputType": "url",
        "description": "Under the license there is a 'More information' button. The link is used to redirect the user when this button is clicked.",
        "rules": [
          {
            "id": "required",
            "regex": "!!v && v.length > 0",
            "message": "This field is required"
          },
          {
            "id": "url",
            "regex": "v === '' || v === null || /^(https?:\\/\\/)?([a-zA-Z0-9-]+\\.)+[a-zA-Z]{2,}(\\/[^\\s]*)?$/.test(v)",
            "message": "Please type a valid URL (ie http[s]://domain.org)"
          }
        ],
        "required": true,
        "cols": 6
      },
      {
        "id": "method",
        "label": "Method *",
        "type": "select",
        "description": "MD method is displayed in the overview.",
        "rules": [
          {
            "id": "required",
            "regex": "!!v && v.length > 0",
            "message": "This field is required"
          }
        ],
        "required": true,
        "multiple": false,
        "options": "https://mmb.mddbr.eu/api/rest/current/projects/options?projection=metadata.METHOD",
        "cols": 6
      },
      {
        "id": "accession",
        "label": "Accession",
        "type": "input",
        "inputType": "text",
        "description": "Use this field to force a custom accession. Accession is a short code to refer this project in your local database. If no accession is forced then a default formatted accession will be generated when loading the project.",
        "required": false,
        "cols": 6
      }
    ]
  },
  {
    "id": "references",
    "shortName": "References",
    "name": "References to other databases",
    "icon": "mdi-database-export-outline",
    "description": "References to other databases to enrich our data. Links to somewhere related to the simulation. These links are displayed in the overview page.",
    "fields": [
      {
        "id": "links",
        "label": "Links",
        "inputs": [
          {
            "id": "name",
            "label": "Name",
            "inputType": "text",
            "description": "Name for the links to somewhere related to the simulation. These links are displayed in the overview page."
          },
          {
            "id": "url",
            "label": "URL",
            "inputType": "url",
            "description": "Links to somewhere related to the simulation. These links are displayed in the overview page. WARNING: This field has no effect in our workflow BUT others may rely on it. MolSSI uses this field to find simulations in our database and place the embed viewer in their website. You must fit to the standard when adding a new MolSSI simulation."
          }
        ],
        "type": "multiple-multi-input",
        "rules": {
          "url": [
            {
              "id": "url",
              "regex": "v === '' || v === null || /^(https?:\\/\\/)?([a-zA-Z0-9-]+\\.)+[a-zA-Z]{2,}(\\/[^\\s]*)?$/.test(v)",
              "message": "Please type a valid URL (ie http[s]://domain.org)"
            }
          ]
        },
        "required": false,
        "cols": 12
      },
      {
        "id": "pdbIds",
        "label": "PDB id",
        "type": "multiple-input",
        "inputType": "pdb",
        "description": "Set the source pdb ids of the trajectory structure. Additional data from the pdb is harvested by the loader while uploading to the database. This data is displayed in the overview page.",
        "rules": [
          {
            "id": "pdb",
            "regex": "v === '' || v === null || /^[0-9][A-Za-z0-9]{3}$/.test(v)",
            "message": "Incorrect PDB id"
          }
        ],
        "required": false,
        "cols": 12,
        "subCols": 4
      },
      {
        "id": "forced_references",
        "label": "Forced UniProt ID",
        "type": "multiple-input",
        "inputType": "uniprot",
        "description": "Set which reference sequences must be used in order to map residues in the structure of the simulation. UniProt accession ids are accepted. Forced references may be not provided or just cover the structure partially. Then a blast will be run for each orphan chain sequence. In addition, UniProt accession ids may be guessed from the PDB ids, when provided. Forced references may be provided as a list. In this scenario UniProt sequences are aligned to chain sequences to guess which UniProt belongs to each chain. Forced references may be provided as a dictionary. Then the user specifies which reference belongs to each chain. Use the 'noref' flag to mark a chain as 'no referable' (e.g. antibodies, synthetic constructs). Eg: Q9BYF1, B: A0A023GPI8, C: noref.",
        "rules": [
          {
            "id": "pdb",
            "regex": "v === '' || v === null || /^(?:[OPQ][0-9][A-Z0-9]{3}[0-9]|[A-NR-Z][0-9]([A-Z][A-Z0-9]{2}[0-9]){1,2}|[A-Za-z]: ?(?:[OPQ][0-9][A-Z0-9]{3}[0-9]|[A-NR-Z][0-9]([A-Z][A-Z0-9]{2}[0-9]){1,2}|noref))$/.test(v)",
            "message": "Incorrect UniProt id"
          }
        ],
        "required": false,
        "cols": 12,
        "subCols": 4
      },
      {
        "id": "ligands",
        "label": "Simulation ligand",
        "type": "multiple-input",
        "inputType": "ligand",
        "description": "Set ligands in the simulation. The workflow identifies ligands by their pubchem accession. If a pubchem accession is passed then it is used. Otherwise, the pubchem accession is found using other database accessions. Optionally, a list of residue indices may be provided to force the mapping. Ligands are mapped in the standard topology file. In addition, an RMSD analysis is run for every defined ligand. Eg: pubchem: 1986, drugbank: DB00945, chembl: CHEMBL1201179, residue: 234, 32, 54.",
        "rules": [
          {
            "id": "pdb",
            "regex": "v === '' || v === null || /^(?:pubchem: ?[1-9][0-9]*|drugbank: ?DB\\d{5}|chembl: ?CHEMBL\\d+|residue: ?(?:\\d{1,3}(?:, ?\\d{1,3})*))$/.test(v)",
            "message": "Incorrect ligand format"
          }
        ],
        "required": false,
        "cols": 12,
        "subCols": 4
      }
    ]
  },
  {
    "id": "simulation",
    "shortName": "Simulation",
    "name": "Simulation metadata",
    "icon": "mdi-tune",
    "description": "Simulation parameters.",
    "fields": [
      {
        "id": "framestep",
        "label": "Framestep (ns)",
        "type": "number",
        "min": 0.01,
        "step": 0.01,
        "suffix": "ns",
        "default": null,
        "description": "Time framestep in nanoseconds (ns). May be null if this is not a trajectory, but an ensemble. Framestep is an important value since it is used in many graph axes in the web client.",
        "required": false,
        "cols": 6
      },
      {
        "id": "timestep",
        "label": "Timestep (fs)",
        "type": "number",
        "min": 1,
        "step": 1,
        "suffix": "fs",
        "default": null,
        "description": "Simulation timestep in femtoseconds (fs).",
        "required": false,
        "cols": 6
      },
      {
        "id": "temp",
        "label": "Temperature (K)",
        "type": "number",
        "min": 0,
        "step": 1,
        "suffix": "K",
        "default": 310,
        "description": "Temperature in Kelvin (K).",
        "required": false,
        "cols": 6
      },
      {
        "id": "ensemble",
        "label": "Ensemble",
        "type": "select",
        "description": "Ensemble.",
        "rules": [
        ],
        "required": false,
        "multiple": false,
        "options": "https://mmb.mddbr.eu/api/rest/current/projects/options?projection=metadata.ENSEMBLE",
        "cols": 6
      },
      {
        "id": "ff",
        "label": "Force fields",
        "type": "select",
        "description": "Force fields.",
        "rules": [
        ],
        "required": false,
        "multiple": true,
        "options": "https://mmb.mddbr.eu/api/rest/current/projects/options?projection=metadata.FF",
        "cols": 6
      },
      {
        "id": "wat",
        "label": "Water force fields",
        "type": "select",
        "description": "Water force fields.",
        "rules": [
        ],
        "required": false,
        "multiple": false,
        "options": "https://mmb.mddbr.eu/api/rest/current/projects/options?projection=metadata.WAT",
        "cols": 6
      },
      {
        "id": "boxtype",
        "label": "Boxtype",
        "type": "select",
        "description": "Boxtype.",
        "rules": [
        ],
        "required": false,
        "multiple": false,
        "options": "https://mmb.mddbr.eu/api/rest/current/projects/options?projection=metadata.BOXTYPE",
        "cols": 6
      }
    ]
  }
]